---
description: Как получить ключи?
---

# Yandex Cloud

{% hint style="info" %}
Здесь и далее подразумевается, что у вас уже есть учётная запись Яндекса.
{% endhint %}

Сначала нужно зарегистрироваться по ссылке [https://cloud.yandex.ru/](https://cloud.yandex.ru/)

Нажмите кнопку **Подключиться**. Далее выбирайте **Войти в аккаунт на Яндексе**. Появится приглашение создать новое облако, в название вводим **ppp** (именно так) и ожидаем, пока завершится первоначальная настройка.

Далее откроется панель управления облаком, в которой нужно будет нажать кнопку **Создать аккаунт** в уведомлении **Создайте платёжный аккаунт**. Привязывайте банковскую карту.

{% hint style="warning" %}
При предложении активировать пробный период можно как согласиться, так и отказаться.

Если пробный период активирован, после его истечения **нужно перейти на платную версию**. В противном случае аккаунт будет заблокирован.

Плата списываться не будет в любом случае. Проект использует ресурсы только в рамках бесплатных квот.
{% endhint %}

Теперь переименуйте каталог по умолчанию (нажмите на стрелку в шапке страницы справа от **default**) на **psina.**

Теперь вернитесь в панель управления, нажав на **psina**. Перейдите на вкладку **Сервисные аккаунты**, нажмите кнопку **Создать сервисный аккаунт**. Добавьте в аккаунт роли `resource-manager.viewer`, `serverless.functions.admin,` `iam.serviceAccounts.user` и `storage.admin`. В поле с именем введите **ppp**.

После создания сервисного аккаунта откроется страница с его деталями. Возьмите идентификатор, вставьте в поле **Сервисный аккаунт Yandex Cloud** в приложении **ppp** (откройте карточку **Yandex Cloud** в разделе **Внешние API**).&#x20;

Теперь добавьте авторизованный ключ в сервисный аккаунт нажатием кнопки **+ Создать новый ключ** в шапке страницы. Во всплывающем меню выберите вариант **Создать авторизованный ключ**. Выбирайте вариант **RSA\_4096**, в описании вводите **psina**.

Вам покажут вновь созданный ключ, а именно пару из открытой и закрытой частей. Эти данные конфиденциальны, не хранятся в облаке, и при закрытии модального окна они исчезнут. Поэтому можете сохранить их у себя локально на диске.

Закрытый ключ скопируйте полностью (включая первую строчку вида `-----BEGIN PRIVATE KEY-----`) и вставьте в поле **Закрытый ключ Yandex Cloud.**

После создания авторизованного ключа создайте ещё один **статический ключ доступа** (из того же меню в заголовке странице, где только что создали авторизованный ключ). В описании опять вводите **psina**. После создания вам покажут открытую и закрытую части; обе должны начинаться с символов **YC**. Вставляйте их в последние два поля страницы **Внешние API - Yandex Cloud** в приложении **ppp**, на которой сейчас находитесь.

Теперь вернитесь на страницу сервисного аккаунта (шаг назад). Там появится таблица **Авторизованные ключи**, где будет присутствовать запись. Первая колонка **Идентификатор** - то, что вы должны скопировать и вставить в поле **Идентификатор открытого ключа Yandex Cloud**.

### Настройка прав сервисного аккаунта в облаке ppp

Перейдите по ссылке [https://console.cloud.yandex.ru/cloud?section=resource-acl](https://console.cloud.yandex.ru/cloud?section=resource-acl)

На этой странице в списке вы увидите своего пользователя с ролями `admin`, `organization-manager.admin` и `resource-manager.clouds.owner`.

\
Теперь, если в этой таблице нет сервисного аккаунта, то его необходимо добавить кнопкой **Назначить роли** в правом верхнем углу страницы.

В модальном окне нажмите кнопку **Выбрать пользователя**, затем найдите ваш сервисный аккаунт, после чего назначьте ему роль `resource-manager.clouds.member`.

Теперь можно сохранить заполненный профиль внешнего API в приложении **ppp**. Название профиля - любое, например, **Yandex Cloud**.

## Возможные проблемы

#### Ошибка "Не удаётся получить IAM-токен."

Может возникать, даже если все ключи верные, но нет соединения с серверами Yandex Cloud. В таком случае попробуйте включить VPN или отключить его, если пользуетесь. После чего повторите попытку.
